{"version":3,"sources":["images/header-logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ClosablePopup.js","components/ImagePopup.js","components/PopupWithForm.js","components/ConfirmPopup.js","hooks/useFormWithValidation.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","utils/api.js","utils/utils.js","components/App.js","index.js"],"names":["Header","className","src","logo","alt","CurrentUserContext","React","createContext","Card","props","currentUser","useContext","isOwn","card","owner","_id","isLiked","likes","some","i","cardLikeButtonClassName","onClick","onCardClick","link","name","type","onCardLike","length","style","display","onDeleteClick","Main","cards","avatar","onEditAvatar","onEditProfile","about","onAddPlace","map","Footer","ClosablePopup","children","rest","useEffect","closeModalWithEsc","e","key","onClose","closeModalWithClick","target","classList","contains","document","addEventListener","removeEventListener","cloneElement","ImagePopup","PopupWithForm","title","buttonText","isOpen","onSubmit","isSaving","isDisabled","method","action","noValidate","disabled","ConfirmPopup","preventDefault","onConfirm","useFormWithValidation","useState","values","setValues","errors","setErrors","isValid","setIsValid","resetForm","useCallback","newValues","newErrors","newIsValid","handleChange","value","validationMessage","closest","checkValidity","EditProfilePopup","onUpdateUser","nickname","description","id","required","minLength","maxLength","pattern","onChange","EditAvatarPopup","onUpdateAvatar","AddPlacePopup","api","baseUrl","headers","this","_baseUrl","_headers","res","ok","json","Promise","reject","status","fetch","then","_checkError","info","body","JSON","stringify","authorization","App","setCurrentUser","setCards","isEditProfilePopupOpen","setEditProfileClick","isAddPlacePopupOpen","setAddPlaceClick","isEditAvatarPopupOpen","setEditAvatarClick","isConfirmPopupOpen","setConfirmClick","selectedCard","setSelectedCard","deletedCard","setDeletedCard","setIsSaving","closeAllPopups","all","getInitCards","getUserInfo","user","catch","err","console","log","Provider","changeLikeCardStatus","newCard","newCards","c","patchUserInfo","finally","addCard","patchAvatar","deleteCard","filter","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ba8d9700.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/header-logo.c2821b38.svg\";","import React from 'react';\nimport logo from '../images/header-logo.svg';\n\nfunction Header() {\n  return (\n    <header className=\"header\">\n      <img src={logo} alt=\"Mesto логотип\" className=\"header__logo\" />\n    </header>\n  )\n}\n\nexport default Header;\n","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();\n","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Card(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const isOwn = props.card.owner._id === currentUser._id;\n  const isLiked = props.card.likes.some(i => i._id === currentUser._id);\n  const cardLikeButtonClassName  = (\n    `place__like-btn button ${isLiked ? 'place__like-btn_active' : ''}`\n  );\n\n  function handleClick() {\n    props.onCardClick(props.card);\n  };\n\n  function handleLikeClick() {\n    props.onCardLike(props.card);\n  };\n\n  function handleDeleteClick() {\n    props.onDeleteClick(props.card);\n  };\n\n  return (\n    <li className=\"place\">\n      <div className=\"place__img-wrapper\" onClick={handleClick}>\n        <img src={props.card.link} alt={props.card.name} className=\"place__image\" />\n      </div>\n      <div className=\"place__header\">\n        <h3 className=\"place__title\">{props.card.name}</h3>\n        <div className=\"place__like\">\n          <button className={cardLikeButtonClassName} type=\"button\" onClick={handleLikeClick}></button>\n          <span className=\"place__like-count\">{props.card.likes.length}</span>\n        </div>\n      </div>\n      <button className=\"place__delete-btn button\" type=\"button\" style={isOwn ? {} : {display: 'none'}} onClick={handleDeleteClick}></button>\n    </li>\n  );\n}\n\nexport default Card;\n","import React from 'react';\nimport Card from './Card';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Main(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  if (props.cards.length === 0) {\n    return (\n      <section className=\"profile\">\n        <h1 className=\"profile__loading\">Loading...</h1>\n      </section>\n    )\n  }\n\n   return (\n    <main className=\"content\">\n      <section className=\"profile\">\n        <div className=\"profile__avatar-box\">\n          <img src={currentUser.avatar} alt=\"Фото профиля\" className=\"profile__avatar button\" />\n          <button className=\"profile__avatar-btn button\" type=\"button\" onClick={props.onEditAvatar}></button>\n        </div>\n        <div className=\"profile__title\">\n          <div className=\"profile__heading\">\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\n            <button className=\"profile__edit-btn button\" type=\"button\" onClick={props.onEditProfile}></button>\n          </div>\n          <p className=\"profile__desc\">{currentUser.about}</p>\n        </div>\n        <button className=\"profile__add-btn button\" type=\"button\" onClick={props.onAddPlace}></button>\n      </section>\n      <section className=\"places\">\n        <ul className=\"places__list\">\n          {props.cards.map((card) => (\n            <Card\n              card={card}\n              key={card._id}\n              onCardClick={props.onCardClick}\n              onCardLike={props.onCardLike}\n              onDeleteClick={props.onDeleteClick}\n              />\n          ))}\n        </ul>\n      </section>\n    </main>\n  );\n}\n\nexport default Main;\n","import React from 'react';\n\nfunction Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\">© 2020 Mesto Russia</p>\n    </footer>\n  )\n}\n\nexport default Footer;\n","import React from 'react';\n\nfunction ClosablePopup(props) {\n  const {children, ...rest} = props;\n\n  React.useEffect(() => {\n    function closeModalWithEsc(e) {\n      if (e.key === \"Escape\") {\n        children.props.onClose();\n      }\n    };\n\n    function closeModalWithClick(e) {\n      if (e.target.classList.contains('modal')) {\n        children.props.onClose();\n      }\n    };\n\n    document.addEventListener('mousedown', closeModalWithClick);\n    document.addEventListener('keydown', closeModalWithEsc);\n\n    return () => {\n      document.removeEventListener('mousedown', closeModalWithClick);\n      document.removeEventListener('keydown', closeModalWithEsc);\n    };\n  }, [children]);\n\n  return (\n    <>\n    {React.cloneElement(children, {...rest})}\n    </>\n  );\n}\n\nexport default ClosablePopup;\n","import React from 'react';\n\nfunction ImagePopup(props) {\n  return (\n    <section className={`modal modal_type_lightbox ${props.card.link ? 'modal_opened' : ''}`}>\n      <div className=\"modal__lightbox\">\n        <figure className=\"modal__figure\">\n          <img src={props.card.link} alt={props.card.link} className=\"modal__image\" />\n          <figcaption className=\"modal__caption\">{props.card.name}</figcaption>\n        </figure>\n        <button className=\"modal__close-btn button\" type=\"button\" onClick={props.onClose}></button>\n      </div>\n    </section>\n  );\n}\n\nexport default ImagePopup;\n","import React from 'react';\n\nfunction PopupWithForm({\n  title,\n  name,\n  buttonText = 'Сохранить',\n  isOpen,\n  onClose,\n  onSubmit,\n  isSaving,\n  children,\n  isDisabled = false,\n}) {\n  return (\n    <section className={`modal modal_type_${name} ${isOpen ? 'modal_opened' : ''}`}>\n      <div className=\"modal__container\">\n        <h3 className=\"modal__title\">{title}</h3>\n        <form className=\"modal__form\" name={name} method=\"GET\" action=\"#\" noValidate onSubmit={onSubmit}>\n          {children}\n          <button className={`modal__save-btn button ${isDisabled && \"modal__save-btn_disabled\"}`} type=\"submit\" disabled={isDisabled}>{isSaving ? 'Загрузка...' : buttonText}</button>\n        </form>\n        <button className=\"modal__close-btn button\" type=\"button\" onClick={onClose}></button>\n      </div>\n    </section>\n  );\n}\n\nexport default PopupWithForm;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction ConfirmPopup(props) {\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    props.onConfirm();\n  };\n\n  return (\n  <PopupWithForm\n    title=\"Вы уверены?\"\n    name=\"confirm\"\n    buttonText=\"Да\"\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n      isSaving={props.isSaving}\n  />\n  );\n}\n\nexport default ConfirmPopup;\n","import React from \"react\";\n\nfunction useFormWithValidation() {\n  const [values, setValues] = React.useState({});\n  const [errors, setErrors] = React.useState({});\n  const [isValid, setIsValid] = React.useState(false);\n\n  const handleChange = (e) => {\n    const target = e.target;\n    const value = target.value;\n    const name = target.name;\n    setValues({...values, [name]: value});\n    setErrors({...errors, [name]: target.validationMessage });\n    setIsValid(target.closest(\"form\").checkValidity());\n  };\n\n  const resetForm = React.useCallback(\n    (newValues = {}, newErrors = {}, newIsValid = false) => {\n      setValues(newValues);\n      setErrors(newErrors);\n      setIsValid(newIsValid);\n    },\n    [setValues, setErrors, setIsValid]\n  );\n\n  return { values, handleChange, errors, isValid, setIsValid, resetForm };\n}\n\nexport default useFormWithValidation;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport useFormWithValidation from '../hooks/useFormWithValidation';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser, isSaving }) {\n  const {values, handleChange, errors, isValid, setIsValid, resetForm} = useFormWithValidation();\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  React.useEffect(() => {\n    if (currentUser) {\n      resetForm({\n        nickname: currentUser.name,\n        description: currentUser.about});\n      setIsValid(true);\n    }\n  }, [currentUser, resetForm, setIsValid]);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    onUpdateUser({\n      name: values.nickname || '',\n      about: values.description || '',\n    });\n  };\n\n  return (\n    <PopupWithForm\n      title=\"Редактировать профиль\"\n      name=\"title\"\n      buttonText=\"Сохранить\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      isSaving={isSaving}\n      isDisabled={!isValid}\n      children={(\n        <fieldset className=\"modal__fields\">\n          <label className=\"modal__field\">\n            <input type=\"text\" className={`modal__input ${errors.nickname && \"modal__input_type_error\"}`}\n                   name=\"nickname\" id=\"nickname-input\" required minLength=\"2\" maxLength=\"40\"\n                   pattern=\"[a-zA-Zа-яА-Я -]{1,}\" value={values.nickname || ''} onChange={handleChange} />\n            <span className={`modal__placeholder ${values.nickname && \"modal__placeholder_is-fixed\"}`} id=\"nickname-input-placeholder\">Имя</span>\n            <span id=\"nickname-input-error\" className={`modal__input-error ${errors.nickname && \"modal__input-error_active\"}`}>{errors.nickname || ''}</span>\n          </label>\n          <label className=\"modal__field\">\n            <input type=\"text\" className={`modal__input ${errors.description && \"modal__input_type_error\"}`}\n                   name=\"description\" id=\"description-input\" required minLength=\"2\" maxLength=\"200\"\n                   value={values.description || ''} onChange={handleChange} />\n            <span className={`modal__placeholder ${values.description && \"modal__placeholder_is-fixed\"}`} id=\"description-input-placeholder\">О себе</span>\n            <span id=\"description-input-error\" className={`modal__input-error ${errors.description && \"modal__input-error_active\"}`}>{errors.description || ''}</span>\n          </label>\n        </fieldset>\n      )}\n    />\n  );\n}\n\nexport default EditProfilePopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport useFormWithValidation from '../hooks/useFormWithValidation';\n\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar, isSaving }) {\n  const {values, handleChange, errors, isValid, resetForm} = useFormWithValidation();\n\n  React.useEffect(() => {\n    resetForm();\n  }, [isOpen, resetForm]);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    onUpdateAvatar({\n      avatar: values.avatar || '',\n    });\n  };\n\n  return (\n  <PopupWithForm\n    title=\"Обновить аватар\"\n    name=\"avatar\"\n    buttonText=\"Обновить\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      isSaving={isSaving}\n      isDisabled={!isValid}\n    children={(\n      <label className=\"modal__field\">\n        <input type=\"url\" className={`modal__input ${errors.avatar && \"modal__input_type_error\"}`}\n               name=\"avatar\" id=\"avatar-input\" required value={values.avatar || ''} onChange={handleChange} />\n        <span className={`modal__placeholder ${values.avatar && \"modal__placeholder_is-fixed\"}`} id=\"avatar-input-placeholder\">Ссылка на аватар</span>\n        <span id=\"avatar-input-error\" className={`modal__input-error ${errors.avatar && \"modal__input-error_active\"}`}>{errors.avatar || ''}</span>\n      </label>\n    )}\n  />\n  );\n}\n\nexport default EditAvatarPopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport useFormWithValidation from '../hooks/useFormWithValidation';\n\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace, isSaving }) {\n  const {values, handleChange, errors, isValid, resetForm} = useFormWithValidation();\n\n  React.useEffect(() => {\n    resetForm();\n  }, [isOpen, resetForm]);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    onAddPlace({\n      name: values.name || '',\n      link: values.link || '',\n    });\n  };\n\n  return (\n    <PopupWithForm\n      title=\"Новое место\"\n      name=\"place\"\n      buttonText=\"Создать\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      isSaving={isSaving}\n      isDisabled={!isValid}\n      children={(\n        <fieldset className=\"modal__fields\">\n          <label className=\"modal__field\">\n            <input type=\"text\" className={`modal__input ${errors.name && \"modal__input_type_error\"}`}\n                   name=\"name\" id=\"place-input\" required minLength=\"2\" maxLength=\"30\"\n                   value={values.name || ''} onChange={handleChange} />\n            <span className={`modal__placeholder ${values.name && \"modal__placeholder_is-fixed\"}`} id=\"place-input-placeholder\">Название</span>\n            <span id=\"name-input-error\" className={`modal__input-error ${errors.name && \"modal__input-error_active\"}`}>{errors.name || ''}</span>\n          </label>\n          <label className=\"modal__field\">\n            <input type=\"url\" className={`modal__input ${errors.link && \"modal__input_type_error\"}`}\n                  name=\"link\" id=\"link-input\" required value={values.link || ''} onChange={handleChange}/>\n            <span className={`modal__placeholder ${values.link && \"modal__placeholder_is-fixed\"}`} id=\"link-input-placeholder\">Ссылка на картинку</span>\n            <span id=\"link-input-error\" className={`modal__input-error ${errors.link && \"modal__input-error_active\"}`}>{errors.link || ''}</span>\n          </label>\n        </fieldset>\n      )}\n    />\n  );\n}\n\nexport default AddPlacePopup;\n","import { apiOptions } from './utils';\n\nexport default class Api {\n  constructor({ baseUrl, headers }) {\n    this._baseUrl = baseUrl;\n    this._headers = headers;\n  }\n\n  _checkError(res) {\n    if (res.ok) {\n      return res.json();\n    }\n\n    return Promise.reject(`Error: ${res.status}`)\n  }\n\n  getUserInfo() {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: this._headers\n      })\n      .then(this._checkError);\n  }\n\n  getInitCards() {\n    return fetch(`${this._baseUrl}/cards`, {\n      headers: this._headers\n      })\n      .then(this._checkError);\n  }\n\n  patchUserInfo(info) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify(info)\n    })\n    .then(this._checkError);\n  }\n\n  addCard(card) {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify(card)\n    })\n    .then(this._checkError);\n  }\n\n  deleteCard(id) {\n    return fetch(`${this._baseUrl}/cards/${id}`, {\n      method: \"DELETE\",\n      headers: this._headers,\n    })\n    .then(this._checkError);\n  }\n\n  changeLikeCardStatus(id, isLiked) {\n    if (isLiked) {\n      return fetch(`${this._baseUrl}/cards/likes/${id}`, {\n        method: \"PUT\",\n        headers: this._headers\n        })\n        .then(this._checkError);\n    } else {\n      return fetch(`${this._baseUrl}/cards/likes/${id}`, {\n        method: \"DELETE\",\n        headers: this._headers\n        })\n        .then(this._checkError);\n    }\n  }\n\n  patchAvatar(avatar) {\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify(avatar)\n    })\n    .then(this._checkError);\n  }\n}\n\nexport const api = new Api(apiOptions);\n","export const apiOptions = {\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-15',\n  headers: {\n    authorization: '793e9e42-5ad3-4803-88e8-acbb4feac8c0',\n    'Content-Type': 'application/json'\n  }\n};\n","import React from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport ClosablePopup from './ClosablePopup';\nimport ImagePopup from './ImagePopup';\nimport ConfirmPopup from './ConfirmPopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport { api } from '../utils/api';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction App() {\n  const [currentUser, setCurrentUser] = React.useState();\n  const [cards, setCards] = React.useState([]);\n  const [isEditProfilePopupOpen, setEditProfileClick] = React.useState(false);\n  const [isAddPlacePopupOpen, setAddPlaceClick] = React.useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarClick] = React.useState(false);\n  const [isConfirmPopupOpen, setConfirmClick] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [deletedCard, setDeletedCard] = React.useState({});\n  const [isSaving, setIsSaving] = React.useState(false);\n\n  React.useEffect(() => {\n    Promise.all([api.getInitCards(),api.getUserInfo()])\n    .then(([ cards, user ]) => {\n      setCurrentUser(user);\n      setCards(cards);\n    })\n    .catch(err => console.log(err))\n  }, []);\n\n  function handleEditProfileClick() {\n    setEditProfileClick(true);\n  };\n\n  function handleAddPlaceClick() {\n    setAddPlaceClick(true);\n  };\n\n  function handleDeleteClick(card) {\n    setConfirmClick(true);\n    setDeletedCard(card);\n  };\n\n  function handleEditAvatarClick() {\n    setEditAvatarClick(true);\n  };\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  };\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    api.changeLikeCardStatus(card._id, !isLiked)\n    .then((newCard) => {\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n      setCards(newCards)\n    })\n    .catch(err => console.log(err))\n  };\n\n  function handleCardDelete() {\n    setIsSaving(true);\n    api.deleteCard(deletedCard._id)\n    .then(() => {\n      const newCards = cards.filter((c) => c._id !== deletedCard._id);\n      setCards(newCards);\n    })\n    .catch(err => console.log(err))\n    .finally(() => closeAllPopups());\n  };\n\n  function handleUpdateUser(user) {\n    setIsSaving(true);\n    api.patchUserInfo(user)\n    .then((user) => setCurrentUser(user))\n    .catch(err => console.log(err))\n    .finally(() => closeAllPopups());\n  };\n\n  function handleUpdateAvatar(avatar) {\n    setIsSaving(true);\n    api.patchAvatar(avatar)\n    .then((avatar) => setCurrentUser(avatar))\n    .catch(err => console.log(err))\n    .finally(() => closeAllPopups());\n  };\n\n  function handleAddPlaceSubmit(card) {\n    setIsSaving(true);\n    api.addCard(card)\n    .then((card) => setCards([card, ...cards]))\n    .catch(err => console.log(err))\n    .finally(() => closeAllPopups());\n  };\n\n  function closeAllPopups() {\n    setEditProfileClick(false);\n    setAddPlaceClick(false);\n    setEditAvatarClick(false);\n    setConfirmClick(false);\n    setSelectedCard({});\n    setDeletedCard({});\n    setIsSaving(false);\n  };\n\n  return (\n    <div className=\"page__content\">\n      <CurrentUserContext.Provider value={currentUser}>\n        <Header />\n        <Main\n          onEditProfile={handleEditProfileClick}\n          onAddPlace={handleAddPlaceClick}\n          onEditAvatar={handleEditAvatarClick}\n          onCardClick={handleCardClick}\n          cards={cards}\n          onCardLike={handleCardLike}\n          onDeleteClick={handleDeleteClick}\n        />\n        <Footer />\n        {isEditProfilePopupOpen ?\n          <ClosablePopup>\n            <EditProfilePopup\n              isOpen={isEditProfilePopupOpen}\n              onClose={closeAllPopups}\n              onUpdateUser={handleUpdateUser}\n              isSaving={isSaving}\n            />\n          </ClosablePopup>\n        : ''}\n        {isAddPlacePopupOpen ?\n          <ClosablePopup>\n            <AddPlacePopup\n              isOpen={isAddPlacePopupOpen}\n              onClose={closeAllPopups}\n              onAddPlace={handleAddPlaceSubmit}\n              isSaving={isSaving}\n            />\n          </ClosablePopup>\n        : ''}\n        {isEditAvatarPopupOpen ?\n          <ClosablePopup>\n            <EditAvatarPopup\n              isOpen={isEditAvatarPopupOpen}\n              onClose={closeAllPopups}\n              onUpdateAvatar={handleUpdateAvatar}\n              isSaving={isSaving}\n            />\n          </ClosablePopup>\n        : ''}\n        {selectedCard.link ?\n        <ClosablePopup>\n          <ImagePopup\n            card={selectedCard}\n            onClose={closeAllPopups}\n          />\n          </ClosablePopup>\n        : ''}\n        {isConfirmPopupOpen ?\n          <ClosablePopup>\n            <ConfirmPopup\n              isOpen={isConfirmPopupOpen}\n              onClose={closeAllPopups}\n              onConfirm={handleCardDelete}\n              isSaving={isSaving}\n            />\n          </ClosablePopup>\n        : ''}\n      </CurrentUserContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}